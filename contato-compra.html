<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quero Comprar — BrazilTrad</title>

  <style>
    body { margin:0; font-family:Inter, Arial, sans-serif; background:#f5f5f5; padding-top:40px; }
    form { max-width:520px; margin:0 auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,0.07); }
    h1 { text-align:center; font-size:28px; margin-bottom:10px; }
    p.desc { text-align:center; margin-bottom:25px; color:#555; }
    label { display:block; margin-top:14px; font-weight:600; font-size:14px; }
    input, textarea, select { width:100%; padding:12px; margin-top:4px; border:1px solid #ccc; border-radius:6px; font-size:14px; }
    button { width:100%; margin-top:24px; background:#0F4C5C; color:#fff; border:none; padding:14px; border-radius:6px; cursor:pointer; font-size:16px; font-weight:600; }
    .msg { margin-top:18px; text-align:center; font-weight:600; }
    .success{color:#008f4c;} .error{color:#c62828;}
    #backBtn{display:none;margin-top:14px;background:#0F4C5C;color:white;padding:12px;border:none;border-radius:6px;cursor:pointer;font-size:15px;}
  </style>
</head>

<body>

<main class="container">
  <h1>Quero Comprar</h1>
  <p class="desc">Preencha o formulário abaixo e nossa equipe entrará em contato.</p>

  <!-- FORMULÁRIO QUE ENVIA DIRETAMENTE PARA O ZOHO -->
 <form id="contactForm" method="POST">
    <!-- TOKENS OBRIGATÓRIOS DO ZOHO -->
    <input type="hidden" name="xnQsjsdp" value="006d2ecb73ad998ea05f038497601dc3ffae95c11e530d1250cc6309dabfc502">
    <input type="hidden" name="xmIwtLD" value="0c16e695af92187629acdbe97f14dc0656f785e23f9449adbc346216ab10aaebe8d345eda125a27c49af0f12ee5c0f23">
    <input type="hidden" name="zc_gad" value="">
    <input type="hidden" name="actionType" value="TGVhZHM=">
    <input type="hidden" name="returnURL" value="">
    <input type="hidden" name="Lead Source" value="Comprador">

    <label>Nome *</label>
    <input type="text" name="Last Name" id="nome" required>

    <label>E-mail *</label>
    <input type="email" name="Email" id="email" required>

    <label>Empresa *</label>
    <input type="text" name="Company" id="empresa" required>

    <label>Celular</label>
    <input type="text" name="Mobile" id="telefone">

    <label>Produto que deseja comprar *</label>
    <select name="Industry" id="produto" required>
      <option value="">Selecione...</option>
      <option value="Café">Café</option>
      <option value="Soja">Soja</option>
      <option value="Milho">Milho</option>
      <option value="Carnes">Carnes</option>
      <option value="Minérios">Minérios</option>
      <option value="Açúcar">Açúcar</option>
      <option value="Outros">Outros</option>
    </select>

    <label>Volume mensal estimado</label>
    <input type="text" name="Annual Revenue" id="volume">

    <label>País de origem da carga</label>
    <input type="text" name="City" id="pais">

    <label>Mensagem *</label>
    <textarea name="Description" id="mensagem" rows="5" required></textarea>

    <button type="submit" id="submitBtn">Enviar</button>

    <div id="formMsg" class="msg"></div>
    <button id="backBtn" type="button" onclick="history.back()">Voltar ao site</button>
  </form>

  <!-- IFRAME INVISÍVEL: Zoho responde aqui -->
  <iframe name="zoho_iframe" style="display:none;"></iframe>

</main>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyjINH9RzPYSydQipJBkmZ_1FMXL5irgNOTxML9QxqvaAb7tRjDfpoeq_GV-ximZpDo/exec";

document.getElementById("contactForm").addEventListener("submit", async function(e){
  e.preventDefault(); // impede envio imediato ao Zoho

  const form = document.getElementById("contactForm");
  const msg = document.getElementById("formMsg");
  const backBtn = document.getElementById("backBtn");

  // Criar payload para o Apps Script
  const fd = new FormData();
  fd.append("nome", document.getElementById("nome").value);
  fd.append("email", document.getElementById("email").value);
  fd.append("telefone", document.getElementById("telefone").value);
  fd.append("empresa", document.getElementById("empresa").value);
  fd.append("pais", document.getElementById("pais").value);
  fd.append("produto", document.getElementById("produto").value);
  fd.append("volume", document.getElementById("volume").value);
  fd.append("mensagem", document.getElementById("mensagem").value);
  fd.append("idioma", "PT");
  fd.append("origem_formulario", "comprar.html");

  try {
    // Envio para Apps Script (gravar + e-mails)
    await fetch(SCRIPT_URL, { method: "POST", body: fd });

    // Envio para o Zoho (agora deixamos o submit ir)

    // mensagem de sucesso
    msg.textContent = "Mensagem enviada com sucesso!";
    msg.classList.add("success");
    backBtn.style.display = "block";

    setTimeout(() => form.reset(), 300);

  } catch (err) {
    msg.textContent = "Erro ao enviar. Tente novamente.";
    msg.classList.add("error");
  }
});
</script>

</body>
</html>
